@model LanchesMac.ViewModels.PedidoLancheViewModel

@{
    ViewData["Title"] = "Detalhes dos Lanches do Pedido";
    decimal pedidoTotal = 0;
}

<section class="bg-dark text-light py-5 min-vh-100">
    <div class="container">
        <!-- Cabeçalho do Pedido -->
        <div class="mb-5 text-center">
            <h2 class="fw-bold text-warning mb-2">
                <i class="bi bi-receipt-cutoff me-2"></i>Detalhes do Pedido
            </h2>
            <hr class="border-secondary opacity-50 w-25 mx-auto" />
        </div>

        <!-- Informações do Pedido -->
        <div class="row g-4 bg-gradient p-4 rounded-4 border border-secondary shadow-sm mb-5">
            <div class="col-md-3">
                <p class="mb-1 text-muted">Número do Pedido</p>
                <p class="fw-semibold fs-5 text-warning">#@Model.Pedido.PedidoId</p>
            </div>
            <div class="col-md-3">
                <p class="mb-1 text-muted">Cliente</p>
                <p class="fw-semibold">@Model.Pedido.Nome</p>
            </div>
            <div class="col-md-3">
                <p class="mb-1 text-muted">Data do Pedido</p>
                <p>@Model.Pedido.PedidoEnviado.ToString("dd/MM/yyyy HH:mm")</p>
            </div>
            <div class="col-md-3">
                <p class="mb-1 text-muted">Entrega Prevista</p>
                <p>@(Model.Pedido.PedidoEntregueEm?.ToString("dd/MM/yyyy HH:mm") ?? "—")</p>
            </div>
        </div>

        <!-- Tabela dos Itens -->
        <div class="table-responsive rounded-4 shadow-lg border border-secondary">
            <table class="table table-dark table-striped align-middle mb-0">
                <thead class="table-warning text-dark">
                    <tr>
                        <th>Nome do Lanche</th>
                        <th class="text-center">Imagem</th>
                        <th class="text-end">Preço</th>
                        <th class="text-end">Quantidade</th>
                        <th class="text-end">Subtotal</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.Pedido.PedidoItens)
                    {
                        var subtotal = item.Lanche.Preco * item.Quantidade;
                        pedidoTotal += subtotal;

                        <tr>
                            <td class="fw-semibold">@item.Lanche.Nome</td>
                            <td class="text-center">
                                <img src="@item.Lanche.ImagemUrl"
                                     alt="@item.Lanche.Nome"
                                     class="img-thumbnail rounded-3 shadow-sm"
                                     style="width: 90px; height: 90px; object-fit: cover;" />
                            </td>
                            <td class="text-end text-success fw-semibold">@item.Lanche.Preco.ToString("C")</td>
                            <td class="text-end fw-semibold">@item.Quantidade</td>
                            <td class="text-end fw-bold text-success">@subtotal.ToString("C")</td>
                        </tr>
                    }
                </tbody>
                <tfoot class="border-top border-warning">
                    <tr>
                        <td colspan="4" class="text-end fw-bold text-warning">Total do Pedido:</td>
                        <td class="text-end fw-bold text-warning">@pedidoTotal.ToString("C")</td>
                    </tr>
                </tfoot>
            </table>
        </div>

        <!-- Botão Voltar -->
        <div class="text-end mt-5">
            <a asp-action="Index"
               class="btn btn-outline-warning btn-lg fw-semibold rounded-pill shadow-sm px-4">
                <i class="bi bi-arrow-left-circle me-2"></i> Voltar aos Pedidos
            </a>
        </div>
    </div>
</section>
